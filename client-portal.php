<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- Page title -->
      <title>SouthLane Animal Hospital</title>

      <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
      <script src="js/respond.js"></script>
      <![endif]-->

      <!-- Bootstrap Core CSS -->
      <link href="css/bootstrap.css" rel="stylesheet" type="text/css">

      <!-- Icon fonts -->
      <link href="fonts/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
      <link href="fonts/flaticons/flaticon.css" rel="stylesheet" type="text/css">

      <!-- Google fonts -->
      <link href='https://fonts.googleapis.com/css?family=Nunito:300,400,700%7CBree+Serif&display=swap' rel='stylesheet' type='text/css'>

      <!-- Css Animations -->
      <link href="css/animate.css" rel="stylesheet" />

      <!-- Theme CSS -->
      <link href="css/style.css" rel="stylesheet">

	  <!-- Color Style CSS -->
      <link href="styles/yellowpaws.css" rel="stylesheet">

	  <!-- Prefix free CSS -->
	  <script src="js/prefixfree.js"></script>

      <!-- Owl Slider & Prettyphoto -->
      <link rel="stylesheet" href="css/owl.carousel.css">

      <!-- Favicons-->
      <!-- <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"> -->
      <link rel="shortcut icon" href="img/icon.png" type="image/x-icon">
      <link rel="icon" href="img/icon.png" type="image/x-icon">
   </head>

   <body id="page-top" data-spy="scroll" data-target=".navbar-custom">
	<!-- Preloader -->
	<div id="preloader">
		<div class="spinner">
			<div class="rect1"></div>
			<div class="rect2"></div>
			<div class="rect3"></div>
			<div class="rect4"></div>
			<div class="rect5"></div>
		</div>
	</div>
	<!-- Navbar -->
      <nav class="navbar navbar-custom navbar-fixed-top">
	  		<!-- Start Top Bar -->
			<div class="top-bar hidden-xs hidden-sm">
				<div class="container">
					<div class="row">
						<div class="col-md-10">
							<!-- Start Contact Info -->
							<ul class="contact-details">
                                <li><i class="fa fa-map-marker"></i>Ittehad Commercial Lane 05, DHA phase 06, Khi.</li>
                                <li><i class="fa fa-envelope"></i>info@southlaneanimalhospital.com</li>
                                <li><i class="fa fa-phone"></i>+92 (313) 117 6092</li>
                            </ul><!-- End Contact Info -->
						</div>
						<div class="col-md-2">
							<!-- Start Social Links -->
							<ul class="social-list">
								<li><a  target="_blank" title="Facebook" href="https://www.facebook.com/South-Lane-Animal-Hospital-100219902486359/"><i class="fa fa-facebook"></i></a></li>
								<li><a  target="_blank" title="Instagram" href="https://www.instagram.com/southlaneanimalhospital"><i class="fa fa-instagram"></i></a></li>
							</ul>
							<!-- End Social Links -->
						</div>
					</div>
				</div>
			</div><!-- End Top bar -->
         <div class="container">
         <!-- navbar -->
            <div class="navbar-header page-scroll">
               <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
               <i class="fa fa-bars"></i>
               </button>
               <!-- Logo -->
               <div class="page-scroll">
                  <a class="navbar-brand" href="http://southlaneanimalhospital.com/">
				  <!--Font Icon logo and text -->
                     <span class=""><img src="img/s-logo.png" alt="" srcset=""></span>South Lane Animal Hospital
                  </a>
               </div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
               <ul class="nav navbar-nav page-scroll">
                  <li class="active"><a href="http://southlaneanimalhospital.com/">Home</a></li>
                  <li><a href="#appointment">Book an Appointment</a></li>
                  <li><a href="#history">Track Your History</a></li>
                  <li><a href="#contact">Contact</a></li>
               </ul>
            </div>
         </div>
      </nav><!-- Navbar ends -->
	<!-- Section Contact -->
	<section id="main" class="home-section">
	   <div class="col-lg-8 col-lg-offset-2">
		  <!-- Section heading -->
		  <div class="section-heading">
			 <h2>Clients Portal</h2>
			 <div class="hr"></div>
		  </div>
	   </div>
	</section>
<head>
<!--===============================================================================================-->
		<link rel="stylesheet" type="text/css" href="https://southlaneanimalhospital.com/css/util.css">
		<link rel="stylesheet" type="text/css" href="https://southlaneanimalhospital.com/css/main.css">
	<!--===============================================================================================-->
</head>
<body>
<style>
    .wrap-login100 {
        background:transparent !important;
        width: 90%;
        margin: 0 auto;
        border-radius: 10px;
        overflow: hidden;
        padding: 20px 55px 33px 55px;
        box-shadow: 0 5px 10px 0px rgb(0 0 0 / 10%);
        -moz-box-shadow: 0 5px 10px 0px rgba(0, 0, 0, 0.1);
        -webkit-box-shadow: 0 5px 10px 0px rgb(0 0 0 / 10%);
        -o-box-shadow: 0 5px 10px 0px rgba(0, 0, 0, 0.1);
        -ms-box-shadow: 0 5px 10px 0px rgba(0, 0, 0, 0.1);

    }

    .container-login100-new {
        width: 100%;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        padding: 15px;
        margin-top:25px;
    }

    .container-login100-form-btn{
        width:50%;
        float:right;
    }
	@media only screen and (min-width: 600px) {
		.desktop-grid{
			width: 50%;
			float:left;
		}
		.wrap-input100{
			float:left;
		}
		.container-login100-form-btn{
			width:25%;
			float:right;
		}
	}

    .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
        font-weight: bold !important;
        color: #F60017 !important;
    }

    .add-btn{
        margin: 0px;
        padding: 10px !important;
        display: inline-block;
        font-weight: 400;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        border: 1px solid transparent;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        line-height: 1.5;
        border-radius: 0.25rem;
        transition: background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }
</style>
<div class="container htmlContent" id="appointment" >
	<div class="row">
		<div class="col">
			<div class="section_title_container text-center">
				<h2 class="section_title">Create a new Appointment</h2>
				<p>Fields with * are required</p>
				<div class="hr"></div>
			</div>
		</div>

	</div>
</div>
<div class="limiter htmlContent">
		<div class="container-login100-new">
            <div class="wrap-login100">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <button class="nav-link disabled active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Patient & Appointment Details</button>
                    </div>
                </nav>
                <br>
                <br>
				<div class="tab-content" id="nav-tabContent">
					<div class="tab-pane active  show" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
						<div class="login100-form validate-form">
							<div class="wrap-input100 desktop-grid">
								<input class="input100" type="text" name="ownername">
								<span class="focus-input100" data-placeholder="Owner's Name*"></span>
							</div>
							<div class="wrap-input100 desktop-grid">
								<input class="input100" type="text" name="patientname">
								<span class="focus-input100" data-placeholder="Patient Name*"></span>
							</div>
							<div class="wrap-input100">
								<input class="input100" type="text" name="contact">
								<span class="focus-input100" data-placeholder="Owner's Contact*"></span>
							</div>
							<div class="wrap-input100">
								<input style="text-align:center;" id="appointment_date" class="input100" type="date" name="appdate">
								<span class="focus-input100" data-placeholder="Appointment Date*"></span>
							</div>
							<div class="wrap-input100">
								<input class="input100" type="text" name="notes">
								<span class="focus-input100" data-placeholder="Notes(optional)"></span>
							</div>
							<div class="container-login100-form-btn">
								<div class="wrap-login100-form-btn">
									<div class="login100-form-bgbtn"></div>
									<but class="login100-form-btn" onclick="bookAppointment();">
										BOOK <i class="fa fa-arrow-right" aria-hidden="true"></i>
									</but>
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>
	</div>
</div>

<!-- login form -->
<section style="padding: 50px 0 0px 0;" id="history" class="home-section">
	   <div class="col-lg-8 col-lg-offset-2">
		  <!-- Section heading -->
		  <div class="section-heading">
			 <h3>Enter details below to track history</h3>
			 <div class="hr"></div>
		  </div>
	   </div>
	</section>
<div id="historySection" class="limiter htmlContent">
		<div class="container-login100-new">
            <div class="wrap-login100">
				<div class="tab-content" id="nav-tabContent">
					<div class="tab-pane active  show" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
							<div class="wrap-input100">
								<input class="input100" type="text" name="mrNumberHistory">
								<span class="focus-input100" data-placeholder="MR Number*"></span>
							</div>
							<div class="wrap-input100">
								<input class="input100" type="text" name="contactHistory">
								<span class="focus-input100" data-placeholder="Contact Number*"></span>
							</div>
							<div class="container-login100-form-btn">
								<div class="wrap-login100-form-btn">
									<div class="login100-form-bgbtn"></div>
									<but class="login100-form-btn" onclick="getHistory();">
										View <i class="fa fa-arrow-right" aria-hidden="true"></i>
									</but>
								</div>
							</div>
						</div>
					</div>
			</div>
		</div>
	</div>
	<div id="historyDiv" style="margin-bottom:30px;display:none;">
	<div class="container" style="overflow-x:scroll;">
            <table id="patientsTable" class="table table-bordered">
                <thead>
                    <tr style="background:#F60017; color:white;">
                        <th style="vertical-align: middle;">MR ID</th>
                        <th style="vertical-align: middle;">Bill ID</th>
                        <th style="vertical-align: middle;">Visit Date</th>
                        <th style="vertical-align: middle;">Patient Name</th>
                        <th style="vertical-align: middle;">Owner Name</th>
                        <th style="vertical-align: middle;">Owner Contact</th>
                        <th style="vertical-align: middle;">Doctor</th>
                        <th style="vertical-align: middle;">Procedures</th>
                        <th style="vertical-align: middle;">Total Bill</th>
                        <th style="vertical-align: middle;">Discount</th>
                        <th style="vertical-align: middle;">Total Paid</th>
                        <th style="vertical-align: middle;">Pending</th>
                    </tr>
                </thead>
            <tbody>
                <tr id="hiddenIndex" style="display: none"></tr>
            </tbody>
            </table>
        </div>
		<div style="width:100%;float: none;" class="container-login100-form-btn">
			<div style="margin-right:10%;width: 25vh;" class="wrap-login100-form-btn">
				<div class="login100-form-bgbtn"></div>
				<but class="login100-form-btn" onclick="checkNewHistory();">
					Re-enter <i class="fa fa-arrow-right" aria-hidden="true"></i>
				</but>
			</div>
		</div>
	</div>
<!-- login form -->
<!--===============================================================================================-->
	<script src="https://southlaneanimalhospital.com/south-lane/assets/vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="https://southlaneanimalhospital.com/south-lane/assets/vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
	<script src="https://southlaneanimalhospital.com/south-lane/assets/vendor/bootstrap/js/popper.js"></script>
	<script src="https://southlaneanimalhospital.com/south-lane/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="https://southlaneanimalhospital.com/south-lane/assets/vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="https://southlaneanimalhospital.com/south-lane/assets/vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
	<script src="https://southlaneanimalhospital.com/south-lane/assets/js/main.js"></script>
	<script src="https://southlaneanimalhospital.com/south-lane/assets/sweetalert/sweetalert2@11.js"></script>
</body>
</html>


	<!-- Section Contact -->
	<section id="contact" style="margin-top:25px;padding: 0" class="home-section">
	   <div class="col-lg-8 col-lg-offset-2">
		  <!-- Section heading -->
		  <div class="section-heading">
			 <h2>Get in touch</h2>
			 <div class="hr"></div>
		  </div>
	   </div>
	   <div class="container">
	   	<div class="row">
		  <div class="margin col-md-4 col-sm-6 wow fadeInLeft" data-wow-delay="0.2s">
			 <!-- Contact info -->
			 <h4>Information</h4>
			 <p>Contact for additional information:</p>
			 <p><i class="fa fa-envelope"></i><a href="mailto:southlaneanimalhospital@gmail.com">southlaneanimalhospital@gmail.com</a> <br> or call us</p>
			 <p><i class="fa fa-phone"></i><a href="tel: +92 (313) 1176092">+92 (313) 1176092</a></p>

		  </div>
		  <div class="col-md-7 col-md-offset-1 col-sm-6 col-xs-12 wow fadeInLeft" data-wow-delay="0.2s">
			 <!-- Contact form -->
			 <!-- <div class="form-style" id="contact_form">
				<div id="contact_results"></div>
				<div class="form-group">
				   <input type="text" name="name" class="form-control input-field" placeholder="Name" required>
				</div>
				<div class="form-group">
				   <input type="email" name="email" class="form-control input-field"  placeholder="Email ID" required>
				</div>
				<div class="form-group">
				   <input type="text" name="subject" class="form-control input-field" placeholder="Subject" required>
				</div>
				<div class="form-group">
				   <textarea name="message" id="message" class="textarea-field form-control" rows="4" placeholder="Enter your message" required></textarea>
				</div>
				<div class="form-group">
				   <button type="submit" id="submit_btn" value="Submit" class="btn btn-default pull-right">Send message</button>
				</div>
			 </div> -->

			  <!-- Adress info -->
			  <h4>Location & Time</h4>
			 <p><i class="fa fa-map-marker"></i>6 C2, Ittehad Commercial Area Phase 6 Defence Housing Authority, Karachi, Karachi City, Sindh 75500</p>
			 <p><i class="fa fa-clock-o"></i>Regular Timings: 11 a.m to 08 p.m <br><i class="fa fa-clock-o"></i>Friday Timing: 3 p.m to 6 p.m</p>
			 <!--/Contact form -->
		  </div><!-- /col-md-6 -->
		</div><!-- /row -->
	   </div><!-- /container-->
	</section>
	<!--Map -->
	<div class="wow fadeInTop" data-wow-delay="0.2s">
        <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d14487.286216772318!2d67.0733152!3d24.8015632!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0xbf70c185139fcf11!2sSouth%20Lane%20Animal%20Hospital!5e0!3m2!1sen!2s!4v1642404403361!5m2!1sen!2s"  style="margin:0 auto;border:0;width:100%; height:60vh" allowfullscreen="" loading="lazy"></iframe>
	</div>
	<!-- Section ends -->

    <!-- Footer -->
	<footer>
	   <div class="container">
		  <div class="row wow fadeInUp" data-wow-delay="0.2s">
			 <div class="col-sm-4 col-md-4">
			 <!-- Social Media icons -->
				<ul class="social-media">
				   <li><a target="_blank" title="Facebook" href="https://www.facebook.com/South-Lane-Animal-Hospital-100219902486359/"><i class="fa fa-facebook"></i></a></li>
				   <li><a target="_blank" title="Instagram" href="https://www.instagram.com/southlaneanimalhospital"><i class="fa fa-instagram"></i></a></li>
				</ul>
			 </div>
			 <!-- Bottom Credits -->
			 <div class="col-sm-8 col-md-offset-3 col-md-5 text-center">
				<p>COPYRIGHT Â© 2022 All rights reserved by South Lane Animal Hospital</p>
			 </div>
		  </div><!-- /row-->
	   </div><!-- /container -->
	   <!-- Go To Top Link -->
	   <div class="page-scroll hidden-sm hidden-xs">
		  <a href="#page-top" class="back-to-top"><i class="fa fa-angle-up"></i></a>
	   </div>
	</footer>
	<!-- /footer ends -->

	<!-- Core JavaScript Files -->
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/main.js"></script>

	<!-- Plugins -->
	<script src="js/plugins.js"></script>

	<!-- Counter -->
	<script src="js/numscroller.js"></script>

	<!-- Contact form -->
	<script src="js/contact.js"></script>

   </body>
</html>
<style>
	@media screen and (max-width: 990px) {
		.navbar-nav > li > a {
			line-height: 43px;
			padding: 0px 0px 0px 35px;
		}
	}
</style>
<script>
	var serverName="<?=$_SERVER['SERVER_NAME']?>";
	if(serverName=="localhost"){
		serverName="http://"+serverName;
	}else{
		serverName="https://"+serverName;
	}
	function getHistory(){
		var finalResponse;
		var mr_number =$('input[name="mrNumberHistory"]').val();
		var contact =$('input[name="contactHistory"]').val();
		if(mr_number=="" || contact==""){
			Swal.fire({
				icon: 'error',
				title: 'Oops...',
				text: 'Fill out the required fields (*)',
				footer: '<a href="">Why do I have this issue?</a>'
			});
		}else{
			var settings = {
				"url": serverName+"/south-lane/api/client_portal/history.php",
				"method": "POST",
				"timeout": 0,
				"headers": {
					"Content-Type": "application/json",
				},
				"data": JSON.stringify({
					"mr_number": mr_number,
					"contact": contact
				}),
			};

			$.ajax(settings).done(function (response) {
				if(response!="no records found"){
					finalResponse=JSON.parse(response);
					$('#historyDiv').show();
					$('#historySection').hide();
					$('tr.template').remove();
					var html="";
					for(var i=0;i<finalResponse.length;i++){
						var date = new Date(finalResponse[i]['bill_date']);
						var dateTime=date.getDate()+"/"+(date.getMonth()+1)+"/"+date.getFullYear();
						html+="<tr class='template'><td>"+mr_number+"</td>";
						html+="<td>"+finalResponse[i]['bill_id_unique']+"</td>";
						html+="<td>"+dateTime+"</td>";
						html+="<td>"+finalResponse[i]['patient_name']+"</td>";
						html+="<td>"+finalResponse[i]['owner_name']+"</td>";
						html+="<td>"+finalResponse[i]['contact']+"</td>";
						html+="<td>"+finalResponse[i]['doctor']+"</td>";
						html+="<td>"+finalResponse[i]['procedures_with_amount']+"</td>";
						html+="<td>"+finalResponse[i]['extra_charges']+" PKR</td>";
						html+="<td>"+finalResponse[i]['discount']+" PKR</td>";
						html+="<td>"+finalResponse[i]['received']+" PKR</td>";
						html+="<td>"+finalResponse[i]['pending']+" PKR</td></tr>";
					}
					$('#hiddenIndex').before(html);
					console.log(finalResponse);
				}else if(response=="server error"){
					Swal.fire({
						icon: 'error',
						title: 'Server Error',
						text: 'Try again later.',
						footer: '<a href="">Why do I have this issue?</a>'
					});
				}
				else{
					Swal.fire({
						icon: 'error',
						title: 'Oops...',
						text: 'MR Id or Contact is invalid',
						footer: '<a href="">Why do I have this issue?</a>'
					});
				}
			});


		}
	}

	function checkNewHistory(){
		$('input[name="mrNumberHistory"]').val("");
		$('input[name="contactHistory"]').val("");
		$('#historyDiv').hide();
		$('#historySection').show();
	}

	function bookAppointment(){
		var settings = {
			"url": serverName+"/south-lane/api/appointment/create.php",
			"method": "POST",
			"timeout": 0,
			"headers": {
				"Content-Type": "application/json"
			},
			"data": JSON.stringify({
				"patientname": $('input[name="patientname"]').val(),
				"mr_number": "Website Entry",
				"ownername": $('input[name="ownername"]').val(),
				"contact": $('input[name="contact"]').val(),
				"procedure_name": $('input[name="notes"]').val(),
				"procedure_amount": '0',
				"appointment_date": $('input[name="appdate"]').val()
			}),
			};

			$.ajax(settings).done(function (response) {
				var responseArray=response.split("^");
				if(responseArray[0].includes("success")){
					Swal.fire(
						'Good job',
						'Your Appointment id is: '+responseArray[2],
						'success'
					)
					$('input[name="patientname"]').val("");
					$('input[name="ownername"]').val("");
					$('input[name="contact"]').val("");
					$('input[name="notes"]').val("");
					$('input[name="appdate"]').val("");
				}
			});
	}
	 $(function() {
            var dtToday = new Date();

            var month = dtToday.getMonth() + 1;
            var day = dtToday.getDate();
            var year = dtToday.getFullYear();
            if (month < 10)
                month = '0' + month.toString();
            if (day < 10)
                day = '0' + day.toString();

            var maxDate = year + '-' + month + '-' + day;

            $('#appointment_date').attr('min', maxDate);
        });
</script>
